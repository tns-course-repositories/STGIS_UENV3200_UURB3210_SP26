<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2026-01-25">

<title>Spatial Thinking with GIS: Week 2 Class 2 Demonstration Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="c2_demo_files/libs/clipboard/clipboard.min.js"></script>
<script src="c2_demo_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="c2_demo_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="c2_demo_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="c2_demo_files/libs/quarto-html/popper.min.js"></script>
<script src="c2_demo_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="c2_demo_files/libs/quarto-html/anchor.min.js"></script>
<link href="c2_demo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="c2_demo_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="c2_demo_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="c2_demo_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="c2_demo_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="c2_demo_files/styles.css">
</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="-1">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#preamble" id="toc-preamble" class="nav-link active" data-scroll-target="#preamble">Preamble</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#part-i" id="toc-part-i" class="nav-link" data-scroll-target="#part-i">Part I</a></li>
  <li><a href="#part-ii" id="toc-part-ii" class="nav-link" data-scroll-target="#part-ii">Part II</a></li>
  <li><a href="#concluding-remarks" id="toc-concluding-remarks" class="nav-link" data-scroll-target="#concluding-remarks">Concluding Remarks</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Spatial Thinking with GIS: Week 2 Class 2 Demonstration Lab</h1>
<p class="subtitle lead">Spring 2026 | <a href="https://courses.newschool.edu/courses/UENV3200/">UENV 3200 - CRN 11009</a> + <a href="https://courses.newschool.edu/courses/UURB3210">UURB 3210 - CRN 111008</a></p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 25, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="preamble" class="level2">
<h2 class="anchored" data-anchor-id="preamble">Preamble</h2>
<p>In this <strong>Week 2 Class 2</strong> Demonstration Lab, we will create a ‘small scale’ world map featuring populated places. As we work through the lab, we will first import data; learn core components of the QGIS interface, finishing with a final PDF cartographic output that we tailor for best map legibility.</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<ul>
<li><a href="https://weekly-materials.s3-us-west-1.amazonaws.com/c1.assignment.data/c1.natural.earth.data.zip">Class 2 Demonstration Lab Data (also utilized for Assignment 1)</a></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c2_demo_files/img/data.preview.png" class="img-fluid figure-img"></p>
<figcaption>Natural Earth Data Preview</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The directory reads as <code>c1.natural.earth.data</code>; that is fine even as this is technically the second class, <code>c2</code>.</p>
</div>
</div>
</section>
<section id="part-i" class="level2">
<h2 class="anchored" data-anchor-id="part-i">Part I</h2>
<ul>
<li>In order to access and display spatial data within QGIS, the data must first be uncompressed and connected. The following video guide covers the ways that data can be connected to QGIS with an emphasis on establishing a good directory file path and project folder hierarchy. While it may seem simple, maintaining good file structure when working with QGIS can save a lot of errors and undue trouble:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://vimeo.com/1002469658"><img src="c2_demo_files/img/v2-icon.png" class="img-fluid figure-img"></a></p>
<figcaption>Demonstartion Lab 1 | Video Guide 1 - Data Source Manager, Directories and Folders</figcaption>
</figure>
</div>
<ul>
<li>Next, review the basics of the QGIS data interface. Further, deliverables for the course will often take the form of cartographic PDF exports, i.e.&nbsp;maps. Once data is loaded, it can be symbolized, mapped and exported across a variety of export types, including PDF. This <strong>Part III</strong> will cover the location of the various capacities needed to accomplish a fundamental workflow: loading spatial data &gt; symbolize and/or analyze the data &gt; produce cartographic outputs + summary reports.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://vimeo.com/1002468603"><img src="c2_demo_files/img/v3-icon.png" class="img-fluid figure-img"></a></p>
<figcaption>Demonstration Lab 1 | Video Guide 2 - The QGIS Interface</figcaption>
</figure>
</div>
<ul>
<li><p>To start, review the core QGIS 3.x interface. To assist, print out the letter sized PDF of the interface handout:</p></li>
<li><p><a href="https://weekly-materials.s3-us-west-1.amazonaws.com/c1.qgis.orientation/qgis.interface.pdf">PDF Interface Handout</a></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/CU0BHHs.png" class="img-fluid figure-img"></p>
<figcaption>QGIS Main Interface</figcaption>
</figure>
</div>
<p>Review the following components that correspond with the numbered interface locations show above:</p>
<ol type="1">
<li><strong>Map Canvas</strong> - The main display module for spatial data.</li>
<li><strong>Browser Panel</strong> - Directory connections and file hierachies.</li>
<li><strong>Layers Panel</strong> - A stacked display of data within the QGIS project.</li>
<li><strong>Toolbars</strong> - Various tasks common to typical GIS workflows.</li>
<li><strong>Menu Bar</strong> - Top level navigation device with drop-down capacity per component.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Within the <em>Menu Bar</em>, <strong>Plugins</strong> is located. This is a critical component of the topline <em>Menu Bar</em>. Here there are two sub-components - the plugins themselves and the <em>Python Console</em>. Throughout the course we will utilize plugins to accomplish certain tasks. Further, many functions within QGIS rely on python in the background which is installed alongside QGIS on the first install.</p>
</div>
</div>
<ul>
<li><p>If you want to learn more about how to script and run python functions for spatial analysis within QGIS, a recommended primer to get started is located as follows:</p></li>
<li><p><a href="https://anitagraser.com/pyqgis-101-introduction-to-qgis-python-programming-for-non-programmers/">PyQGIS 101: Introduction to QGIS Python programming for non-programmers</a></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/cwcXh5K.png" class="img-fluid figure-img"></p>
<figcaption>Managing QGIS Plugins</figcaption>
</figure>
</div>
<ul>
<li>Typically a GIS project is launched with at least some data that is inherently spatial - administrative boundaries, points locations, raster base layers, ect. To do this first step, make sure the application is open, the <strong>Layers</strong> and <strong>Browser</strong> panels are active (if they are not both active: <em>view &gt; panels &gt; toogle on layers then browser or browser 2</em>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/BDF7ih9.png" class="img-fluid figure-img"></p>
<figcaption>QGIS Panels</figcaption>
</figure>
</div>
<ul>
<li><p>Next, download the compressed assignment data:</p></li>
<li><p><strong><a href="https://weekly-materials.s3-us-west-1.amazonaws.com/c1.assignment.data/c1.natural.earth.data.zip">Assignment 1 Data Download</a></strong></p></li>
<li><p>Use an compression utility (7 Zip or Keka) to unzip the data and expand the directory. The machine desktop is a good location to place your working directory. Once unzipped, your data structure prior to QGIS should look like the following:</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c2_demo_files/img/data.preview.png" class="img-fluid figure-img"></p>
<figcaption><em>Assignment 1 Data Preview</em></figcaption>
</figure>
</div>
<ul>
<li><p>The top level directory <code>c1.natural.earth.data</code> contains the following data:</p></li>
<li><p><code>ne_110m_admin_0_countries</code></p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/Cl8m8vp.png" class="img-fluid figure-img"></p>
<figcaption>Natural Earth Admin Dataset</figcaption>
</figure>
</div>
<ul>
<li><code>ne_110m_populated_places_simple</code></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/P9K6b1c.png" class="img-fluid figure-img"></p>
<figcaption>Natural Earth Populated Places Simple Version</figcaption>
</figure>
</div>
<ul>
<li>Once organized on your machine, point QGIS to the data. This is accomplished by <em>right-click</em> on the <code>Open Data Source Layer</code> tool from the <strong>Toolbar</strong>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/lOvn6o5.png" class="img-fluid figure-img"></p>
<figcaption>QGIS Source Layer Tool</figcaption>
</figure>
</div>
<ul>
<li>Both features in the assignment data are <em>vector</em> features, so the data type will be selected as <em>Vector &gt; File &gt; Vector Dataset(s) &gt; <code>file.name.shp</code></em>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/HwA5op9.png" class="img-fluid figure-img"></p>
<figcaption>QGIS Source Layer Tool &gt; Vector Features</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Warning</span>Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>its the <code>.shp</code> component of the ‘sidecar’ files listed in the sub-directory that is the critical file to open. Make sure to follow <em>open</em> with <em>add</em> so that the <code>.shp</code> is indeed added to the <strong>Map Canvas</strong>.</p>
</div>
</div>
<ul>
<li>Repeat the step above, but this time point to the <code>ne_110m_populated_places_simple.shp</code> file located in the sub-directory <code>ne_110_populated_places_simple</code>. The resulting <strong>Map Canvas</strong> should look similar to the following with two feature layers added to the <strong>Layers Panel</strong>, also displayed in the <strong>Map Canvas</strong> :</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://i.imgur.com/0heoS2P.png" class="img-fluid figure-img"></p>
<figcaption>QGIS Map Canvas</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Color symbology per layer is random upon the initial data load in QGIS. We will make simple changes to the defaults for this assignment. Keep in mind that upcoming assignments will feature much more robust symbol manipulation; for now, simple manipulation is warranted.</p>
</div>
</div>
<ul>
<li>Once assignment <code>.shp</code> data is loaded correctly - <em>Populated Places</em> on top of <em>County Administrative Boundaries</em> - immediately save the project via <em>Project &gt; Save As &gt; <code>assignment1.qgs</code></em>.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is a compressed project save convention (<code>.qgz</code>) and another that is <em>not</em> compressed (<code>.qgs</code>). Proceed with the uncompressed option.</p>
</div>
</div>
</section>
<section id="part-ii" class="level2">
<h2 class="anchored" data-anchor-id="part-ii">Part II</h2>
<p>In the first week’s <a href="https://tns-course-repositories.github.io/STGIS_UENV3200_UURB3210_SP26/demos/c1_demo.html">Demonstration Lab 1</a>, we reviewed, created and mapped within QGIS a <code>.geojson</code> file. This week we will utilize another vector file type that has been a longstanding file extension in ‘modern GIS’ of the past 2-3 decades. Known as the <strong>Shapefile</strong>, this file type is more ‘complicated’ than the ‘flatter’ <code>.geojson</code> as it contains multiple <a href="https://en.wikipedia.org/wiki/Sidecar_file">sidecar files</a> in order to operate correctly:</p>
<blockquote class="blockquote">
<p>In most cases the relationship between the source file and the sidecar file is based on the file name; sidecar files have the same base name as the source file, but with a different extension. The problem with this system is that most operating systems and file managers have no knowledge of these relationships, and might allow the user to rename or move one of the files thereby breaking the relationship.</p>
</blockquote>
<p>Important to note are the three (3) mandatory files that are needed for <a href="https://en.wikipedia.org/wiki/Shapefile">shapefiles</a> to operate within a GIS. They are as follows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c2_demo_files/img/man.png" class="img-fluid figure-img"></p>
<figcaption><em>Mandatory Shapefile Files</em></figcaption>
</figure>
</div>
<ul>
<li>To start, navigate via a browser to <a href="https://geojson.io/#map=2/0/20">geojson.io</a> as we did the first week of class. We will create another points feature using the interface, but this time instead of downloading our points feature as a <code>.geojson</code> file type, we will choose <code>.shp</code> or <em>Shapefile</em>:</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c2_demo_files/img/shp.png" class="img-fluid figure-img"></p>
<figcaption><em>Create a points feature; download as a Shapefile</em></figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="c2_demo_files/img/shp.lines.png" class="img-fluid figure-img"></p>
<figcaption><em>Uncompressed list of the resulting Shapefile <code>.shp</code> and its various sidecar files</em></figcaption>
</figure>
</div>
</section>
<section id="concluding-remarks" class="level2">
<h2 class="anchored" data-anchor-id="concluding-remarks">Concluding Remarks</h2>
<p>In this second demonstration lab, we have become oriented to the QGIS interface. In this week’s assignment, you will further add <em>Cartographic Output</em> to your workflow for ‘large scale’ mapping in the NYC region. The following references are good resources to learn more about QGIS features and geospatial data generally.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<ul>
<li><a href="https://docs.qgis.org/3.40/en/docs/user_manual/index.html">QGIS User Guide</a></li>
<li><a href="https://pallawi-ds.medium.com/what-are-geospatial-data-and-basics-about-getting-started-with-geospatial-data-analysis-6e5691d72930">Medium Post: What is Geospatial data and basics about getting started with geospatial data analysis</a></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("^(?:http:|https:)\/\/www\.quarto\.org\/custom");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<script src="c2_demo_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>